# ğŸ§  ChatGPT Automation Script (Node.js + Puppeteer)

This project automates logging into ChatGPT, sending two prompts (initial + follow-up), and saving the responses as a beautifully formatted Markdown CSV.

Built with **TypeScript**, equipped with ESLint, Prettier, and Husky for code quality â€” and designed with modularity and scalability in mind.

---

## ğŸ“Œ Features

- ğŸ” Authenticates with ChatGPT using **email and password**
- ğŸ’¬ Chats using **two prompts** â€” prompt + reply flow
- ğŸ“¦ Stores responses in a **well-structured Markdown-formatted CSV**
- ğŸ“ Uses a **scalable folder structure** for clean code separation
- âœ… Written in **TypeScript**
- ğŸ” Enforced by **ESLint, Prettier, Husky (pre-commit hook)**
- ğŸŒ± Organized via **Git feature branches**

---

## ğŸš€ How to Use

### 1. Clone the repository
```bash
git clone https://github.com/your-username/your-repo.git
cd your-repo
```

### 2. Install dependencies
```bash
yarn
```

### 3. Provide credentials and prompts

#### Option A: Using `.env`
Create a `.env` file in the root:

```env
EMAIL=your@email.com
PASSWORD=yourpassword
PROMPT1=Tell me a joke
PROMPT2=Haha, another one?
```

#### Option B: Pass via CLI flags
```bash
yarn start \
  --email="your@email.com" \
  --password="yourpassword" \
  --prompt1="Tell me a joke" \
  --prompt2="Haha, another one?"
```

---

## âš ï¸ Important Notes

1. ğŸ§¾ **Email Verification**: During login, ChatGPT may require email verification. If prompted, check your email for a code and paste it into the terminal when asked.
2. ğŸ’¾ Once the script completes, the output will be saved as a CSV at:
   ```
   /data/csv/response_<timestamp>.csv
   ```
   It contains the prompt + reply and their respective ChatGPT responses â€” in **Markdown format** for easy readability.
3. ğŸ›‘ **Cloudflare Blocking**: The script does **not bypass Cloudflare** protection. If blocked:
   - Try using a different IP or VPN
   - Consider logging in manually and using cookies instead

4. ğŸ”„ **Changing Login Flows**: OpenAI occasionally changes its login UI/flow. The script is built to work with the current flow as of development time. If it breaks, updating the selectors may be necessary.

---

## ğŸ—‚ï¸ Folder Structure

```
src/
â”œâ”€â”€ config/              # Global config (CLI args, paths, env)
â”œâ”€â”€ modules/             # Modular code for each feature
â”‚   â”œâ”€â”€ auth/            # Handles login and session
â”‚   â”œâ”€â”€ chat/            # Handles prompt + reply flow
â”‚   â””â”€â”€ consent/         # Cookie consent / onboarding flow
â”‚
â”œâ”€â”€ types/               # Commonly used global types
â”œâ”€â”€ utils/               # Utility functions
â”‚   â”œâ”€â”€ browser.ts       # Browser setup
â”‚   â”œâ”€â”€ cli.ts           # CLI helpers
â”‚   â”œâ”€â”€ csv.ts           # CSV writer utilities
â”‚   â””â”€â”€ cookies.ts       # Load/save session cookies
```

> âœ¨ **Note:** Modules can contain submodules within `modules/<module-name>/modules/` for deeper separation if needed.

---

## ğŸ› ï¸ Dev & Code Quality Tools

- ğŸŸ¨ **TypeScript**: Strict typing and interfaces
- ğŸ§¹ **ESLint + Prettier**: Code linting and consistent formatting
- ğŸ›‘ **Husky**: Pre-commit hook to prevent committing bad code
- ğŸŒ¿ **Branch-based Git Workflow**: Feature-driven branches like `feat/login`, `setup/linting`, etc.

---

## ğŸ“ˆ Output Example

The generated CSV contains:

| Prompt           | Response (Markdown)                             |
|------------------|--------------------------------------------------|
| `Tell me a joke` | `**Sure!**\n\nWhy did the dev go broke?\n...\n` |

The markdown structure preserves:
- Bullet points
- Code blocks
- Line breaks
- Bold/italic text

---

## ğŸ‘¨â€ğŸ’» Author

Built with love and caffeine by [Nawaaz Kortiwala](https://www.linkedin.com/in/nawaaz-kortiwala)

---

## ğŸ§ª Bonus Ideas (Future Improvements)

- Add support for logging in using cookies to bypass Cloudflare
- Enhance support for HTML-to-Markdown fallback if DOM breaks
- Add a GUI or web interface for inputs & visual output

---

## ğŸ“¦ Open Source Usage

This project was built entirely from scratch, leveraging open-source libraries only for tooling, automation, and utility support â€” **no part of the core business logic was copied**.

### âœ”ï¸ OSS Libraries Used

#### **Core Automation**
- [`puppeteer`](https://github.com/puppeteer/puppeteer) â€“ Headless browser automation
- [`puppeteer-extra`](https://github.com/berstend/puppeteer-extra) â€“ Enhanced Puppeteer features
- [`puppeteer-extra-plugin-stealth`](https://github.com/berstend/puppeteer-extra/tree/master/packages/puppeteer-extra-plugin-stealth) â€“ Anti-bot detection plugin

#### **Data Handling**
- [`turndown`](https://github.com/mixmark-io/turndown) â€“ Convert HTML responses into Markdown
- [`csv-writer`](https://github.com/ryu1kn/csv-writer) â€“ Write Markdown-formatted responses to CSV

#### **CLI & Config**
- [`yargs`](https://github.com/yargs/yargs) â€“ Parse command-line arguments
- [`dotenv`](https://github.com/motdotla/dotenv) â€“ Load `.env` environment variables

#### **Dev Tooling**
- [`TypeScript`](https://github.com/microsoft/TypeScript) â€“ Type-safe development
- [`tsx`](https://github.com/esbuild-kit/tsx) â€“ Zero-config TypeScript runner
- [`eslint`](https://github.com/eslint/eslint) + plugins â€“ Linting and import sorting
- [`prettier`](https://github.com/prettier/prettier) â€“ Code formatting
- [`husky`](https://github.com/typicode/husky) â€“ Git pre-commit hook setup

---

> ğŸ’¡ All core logic for DOM traversal, session management, prompt interaction, markdown conversion, and CSV formatting was **manually written** to meet project-specific needs. No snippets or implementations were copied from tutorials or open sources.